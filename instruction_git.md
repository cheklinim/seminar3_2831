# **Инструкция по работе с системой контроля версий Git**

![Эмблема Git](git.jpg)

Git (произносится «гит») — распределённая система управления версиями. Проект был создан Линусом Торвальдсом для управления разработкой ядра Linux, первая версия выпущена 7 апреля 2005 года. На сегодняшний день его поддерживает Джунио Хамано.

## Инициализация репозитория

Чтобы создать (инициализировать) новый репозиторий нужно в терминале ввести команду:

    git init

Репозиторий будет создан в той папке, из которой вызывалась команда

## Проверка состояния репозитория

Чтобы проверить текущее состояние репозитория нужно ввести в терминале команду:

    git status

## Добавление изменения к отслеживанию версионности

Чтобы добавить сделанное изменение к отслеживанию (поместить в индекс) нужно ввести команду:

    git add <имя файла>

где вместо <имя файла> вводится путь к файлу относительно расположения репозитория.

## Фиксация изменений

Чтобы зафиксировать изменение используется команда:

    git commit

В таком случае откроется окно для ввоба краткого описания сделанных изменений.

Чтобы сделать это одновременно с фиксацией используется команда:

    git commit -m "комментарий"

## Просмотр истории изменений

Чтобы посмотреть историю изменений используется комада

    git log

Для просмотра изменений с выводом одного коммита в одну строку используется команда

    git log --oneline

Для просмотра всех имеющихся коммитов используется команда

    git log --all

Для просмотра лога с графическим изображением веток используется команда

    git log --graph

Все указанные флаги могут использоваться вместе:

    git log --all --oneline --graph

## Просмотр различий между изменениями

Для просмотра отличий между текущим состоянием репозитория и последним сохраненным изменением используется команда

    git diff

Можно также посмотреть разницу между любыми двуми коммитами. Для этого используется команда

    git diff <хэш1> <хэш2>

## Переключение на нужное изменение

Чтобы переключиться на нужный коммит используется команда

    git checkout <хэш>

## Ветки в Git

### Создание новой ветки

Чтобы создать новую ветку используется команда

    git branch <имя_ветки>

### Просмотр всех веток

Чтобы посмотреть какие ветки существуют и на какой мы находимся используется команда

    git branch

### Переключение между ветками

Чтобы переключиться на другую ветку используется команда

    git checkout <имя_ветки>

### Слияние веток

Чтобы влить одну ветку в другую необходимо находясь в целевой ветке (КУДА будем делать слияние) выполнить команду

    git merge <имя_вливаемой_ветки>

### Конфликты при слиянии

Если одна и та же строка в разный версиях записана по разному возникнет конфликт.
Чистый гит автоматически сохраняет оба изменения, далее требуется вручную внести нужные правки и сделать коммит.

VSСode дает возможность выбрать какое изменение сохранить (входящее, существующее или оба).

### Удаление ветки

Чтобы удалить ветку, которая больше не нужно (например после слияния) используется команда

    git branch -d <имя_ветки>

## Удаленные репозитории

Удаленный репозиторий это облачное хранилище ваших файлов. Позволяет работать с проектом из любой точки мира, где есть Интернет.

### **Создание локальной копии** 

Обычно вы получаете репозиторий Git одним из двух способов:

1.Вы можете взять локальный каталог, который в настоящее время не находится под версионным контролем, и превратить его в репозиторий Git, либо

2.Вы можете клонировать существующий репозиторий Git из любого места.

В обоих случаях вы получите готовый к работе Git репозиторий на вашем компьютере.

Для получения копии существующего Git-репозитория, например, проекта, в который вы хотите внести свой вклад, необходимо использовать команду:

**git clone <ссылка>**

Ссылку берем с сайта gitHub.com.При проверки статуса, окажется что вы не находитесь в полученной папке.Чтобы перейти в папку используем команду:

**cd <имя папки>**

У автора будет своя ветка master.В ней работать не желательно,врядли это понравится автору.Нужно создать новую ветку и перейти в эту ветку,после продолжать в ней работать.

### Отправление изменений на удаленный репозиторий

Перед пушем надо зафиксировать текущие изменения, то есть сделать *git commit.*

Далее для отправки в терминале пишем:

**git push origin <branch>**
Вместо *branch* — имя ветки, которую надо отправить. Чаще всего используется *master или main*: 

**git push origin master**

Такое каждый раз писать слишком громоздко, для этого придумали *git push* по умолчанию. Для этого единожды набираем предыдущую команду с флагом -u:

**git push -u origin master**

После этого можно писать более коротко, так как git запомнил, что пушить надо на сервер *origin* ветку под именем *master*:

**git push**

Таким образом, git позволяет запушить ветку в удаленный репозиторий. Чтобы через git добавить ветку в удаленный репозиторий, надо запушить существующую локальную ветку.

### Дополнительные опции публикации
**Отправка ветки на сервер в ветку с другим именем**

Для того чтобы сделать git push в другую ветку, есть специальный синтаксис, где после имени ветки через двоеточие пишется имя удаленной ветки:

**git push origin branch:server_branch**

где branch – имя локальной ветки, server_branch – имя удаленной ветки на сервере.

**Отправка всех веток на сервер**
Вместо имени ветки пишем  флаг —all: 

**git push origin --all**

После этого все зафиксированные изменения в ветках отправятся в удаленный репозиторий.
**Отправка текущей ветки**

Удобный способ отправить текущую ветку с тем же именем на сервере.

**git push origin HEAD**

HEAD указывает на текущую ветку (current branch). Тем самым, не надо запоминать имя ветки, на которой вы находитесь.

**Принудительная публикация** (git push —force …)
При отправке может произойти ошибка публикации:

*To github.com:example/test.git
 ! [rejected]        master -> master (fetch first)
error: не удалось отправить некоторые ссылки в «github.com:example/test.git»*
Это так называемый git push rejected, он означает что пуш был отклонен. Правильнее всего — сделать то, что написано в подсказке к ошибке. Надо получить и смержить изменения, затем снова отправить. 

Эта ошибка происходит, так как git проверяет, что новый коммит основан на предыдущих коммитах. Пока вы вносили изменения, кто-то мог запушить изменения того же, над чем вы работали. Поэтому git не может выполнить автоматическое слияние, ваш коммит был раньше и он не базируется на обновленных коммитах в удаленном репозиториие. 

Флагом —force или сокращенной его версией -f отключается проверка коммитов и при необходимости выполняется перезапись истории.

**git push --force**

Нужно быть аккуратными с этой командой, так как она стирает работу других людей. Эта команда оправдана лишь изредка, например, если вы почти сразу внесли изменения коммита с помощью git commit —amend и запушили до того, как кто-то сделал git pull. 

## Закачивание изменений на удаленный репозиторий

Для извлечения и загрузки содержимого из удаленного репозитория и немедленного обновления локального репозитория этим содержимым,используется команда:

**git pull**

Команда git pull на самом деле представляет собой комбинацию двух других команд: git fetch и git merge. На первом этапе git pull выполняется команда git fetch, ограниченная локальной веткой, на которую указывает HEAD. Сразу после загрузки содержимого команда git pull выполняет слияние. Для слитого содержимого создается новый коммит, а указатель HEAD обновляется и начинает указывать на этот новый коммит.

## Распространенные опции

**git pull <remote>**

Извлечь из указанного удаленного репозитория копию текущей ветки и немедленно слить ее с локальной копией. Эта команда аналогична команде git fetch <удаленный-репозиторий>, после которой следует команда git merge origin/<текущая-ветка>.

**git pull --no-commit <remote>**

Подобно вызову по умолчанию, извлекает удаленное содержимое, но не создает новый коммит со слитым содержимым.

**git pull --rebase <remote>**

Аналогично предыдущей команде pull, только вместо команды git merge для интеграции удаленной ветки с локальной веткой используется команда git rebase.

**git pull --verbose**

Во время выполнения команды pull выдает подробный вывод о загружаемом содержимом и информацию о слиянии.

## Создание Форка

Fork - это вcего навсего копия репозитория. Это тоже самое, что branch в Git. Только на GitHub такой branch называется Fork. Для того, чтобы воспользоваться fork, нужно иметь свою собственную учетную запись на GitHub; и нужно войти под ней на GitHub в момент выполнения forka. **С помощью него создается точная копия оригинального репозитория, только на сервисе GitHub. В копии репозитория можно вносить свои собственные изменения, редактировать файлы или удалять директории.**
Как только все изменения будут внесены, то можно поделиться ими - отправить авторам оригинального репозитория запрос на слияние вашего измененного репозитория с их оригинальным репозиторием.

## Создание pull request.
Pull request'ы позволяют вам рассказать другим о тех изменениях, которые вы разместили в своём GitHub-репозитории. Как только pull request отправлен, заинтересованные стороны рассматривают ваши изменения, обсуждают возможные правки или даже добавляют дополняющие коммиты, если нужно. Отправьте её в свою копию репозитория на GitHub:

**git push origin <имя ветки,созданной>**

 Загружает изменения в текущей ветви в origin в ветвь <имя ветки>

Если авторам оригинального репозитория ваши изменения понравятся, то они могут внести их в свой собственый оригинальный репозиторий - принять запрос и выполнить слияние.



